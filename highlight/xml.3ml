styles{
    error{
        color{0xff0000ff}
    }

    angle_bracket{
        color{0xffff0000}
    }

    attr_equals{
        color{0xffff8080}
    }

    text{
        color{0xff808080}
    }

    tag{
        color{0xff00ff00}
    }

    attr_name{
        color{0xff008080}
        style{bold_italic}
    }

    attr_doublequote{
        color{0xff8080ff}
    }

    attr_value{
        color{0xff00ffff}
    }
}

rules{
/*
    pop{
        regex{""}
        pop
    }
*/

    tag_start{
        regex{"<"}
        style{angle_bracket}
        push{tag_name}
    }

    tag_name_end{
        regex{"\s"}
        pop
        push{attrs}
    }

    tag_end{
        regex{">"}
        style{angle_bracket}
        pop
    }

    attr_name{
        regex{"[^\s]{1}"}
        push{attr_name}
    }
    attr_name_unexpected{
        regex{"[\s>]+"}
        push{error}
    }
    attr_name_end{
        regex{"="}
        style{attr_equals}
        pop
        push{attr_value_start}
    }

    attr_value_start_doublequote_unexpected{
        regex{""}
        push{error}
    }
    attr_value_start_doublequote{
        regex{"\""}
        style{attr_doublequote}
        pop
        push{attr_value}
    }
    attr_value_end{
        regex{"\""}
        style{attr_doublequote}
        pop
    }
}

states{
    text{
        style{text}
        rules{tag_start}
    }

    tag_name{
        style{tag}
        rules{tag_name_end tag_end}
    }

    attrs{
        style{text}
        rules{tag_end attr_name}
    }

    attr_name{
        style{attr_name}
        rules{attr_name_end attr_name_unexpected}
    }

    attr_value_start{
        style{text}
        rules{
            attr_value_start_doublequote
            attr_value_start_doublequote_unexpected
        }
    }

    attr_value{
        style{attr_value}
        rules{attr_value_end}
    }

    error{
        style{error}
    }
}
